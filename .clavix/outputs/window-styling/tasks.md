# Implementation Plan

**Project**: window-styling
**Generated**: 2025-12-13

## Technical Context & Standards

- **Framework**: Tauri 2.0 + React 18 + Vite
- **Styling**: Tailwind CSS + shadcn/ui
- **State**: React useState (local state)
- **Plugin**: tauri-plugin-decorum for overlay titlebar
- **Conventions**: kebab-case files, @/ path aliases, shadcn/ui primitives

---

## Phase 1: Rust Backend Setup

- [x] **Add decorum plugin dependency**
  Task ID: phase-1-rust-01
  > **Implementation**: Edit `src-tauri/Cargo.toml`
  > **Details**: Add `tauri-plugin-decorum = "1"` to dependencies section

- [x] **Register decorum plugin and create overlay titlebar**
  Task ID: phase-1-rust-02
  > **Implementation**: Edit `src-tauri/src/lib.rs`
  > **Details**:
  > 1. Add imports: `use tauri::Manager;` and `use tauri_plugin_decorum::WebviewWindowExt;`
  > 2. Add `.plugin(tauri_plugin_decorum::init())` before `.invoke_handler()`
  > 3. Add `.setup()` callback that gets the "main" window and calls `create_overlay_titlebar()`
  > 4. Only apply Windows-specific code (no macOS traffic light setup needed)

---

## Phase 2: Tauri Configuration

- [x] **Enable withGlobalTauri in tauri.conf.json**
  Task ID: phase-2-config-01
  > **Implementation**: Edit `src-tauri/tauri.conf.json`
  > **Details**: ~~Add `"withGlobalTauri": true` inside the `"build"` section~~ (Not needed in Tauri 2 - skipped)

- [x] **Add window control permissions to capabilities**
  Task ID: phase-2-config-02
  > **Implementation**: Edit `src-tauri/capabilities/default.json`
  > **Details**: Add to permissions array:
  > - `"core:window:allow-close"`
  > - `"core:window:allow-minimize"`
  > - `"core:window:allow-maximize"`
  > - `"core:window:allow-toggle-maximize"`
  > - `"core:window:allow-set-focus"`
  > - `"core:window:allow-start-dragging"`
  > - `"decorum:allow-show-snap-overlay"`

---

## Phase 3: Frontend Styling

- [x] **Add CSS styles for window controls**
  Task ID: phase-3-css-01
  > **Implementation**: Edit `src/index.css`
  > **Details**: Add styles targeting decorum's injected elements:
  > - `div[data-tauri-decorum-tb]` - Position the titlebar container
  > - `button.decorum-tb-btn` - Style all control buttons to match dark theme
  > - `button#decorum-tb-minimize` - Minimize button specifics
  > - `button#decorum-tb-maximize` - Maximize button specifics
  > - `button#decorum-tb-close` - Close button (red on hover)
  > - Use colors matching existing dark theme (bg-background, text-foreground)
  > - Ensure controls appear in top-right, above app content

- [x] **Add drag region to header area**
  Task ID: phase-3-css-02
  > **Implementation**: Edit `src/App.tsx`
  > **Details**:
  > 1. Add `data-tauri-drag-region` attribute to the header container div (around lines 28-35)
  > 2. Ensure clickable elements (links, buttons) inside header have `data-tauri-drag-region="false"` or are not affected
  > 3. Add top padding to account for the overlay titlebar height (~32px)

---

## Phase 4: Testing & Verification

- [ ] **Build and test on Windows**
  Task ID: phase-4-test-01
  > **Implementation**: Run `pnpm tauri build` and test on Windows
  > **Details**: Verify:
  > - Window has no native titlebar
  > - Custom min/max/close buttons appear in top-right
  > - Hovering maximize shows Windows Snap Layout
  > - Header area is draggable to move window
  > - Window resizing from edges works
  > - Tabs and other header elements remain clickable

---

*Generated by Clavix /clavix:plan*
