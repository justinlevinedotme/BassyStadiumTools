# Implementation Plan

**Project**: aptabase-analytics
**Generated**: 2025-12-11T00:00:00Z
**Completed**: 2025-12-11

## Technical Context & Standards
*Detected Stack & Patterns*
- **Framework**: Tauri 2.0 + React 18 + Vite
- **Styling**: Tailwind CSS + shadcn/ui (dark theme)
- **State**: localStorage for persistence, React useState for UI
- **Backend**: Rust with modular files (`src-tauri/src/*.rs`)
- **Plugins**: Already using `tauri-plugin-dialog`, `tauri-plugin-shell`, `tauri-plugin-store`
- **Components**: `src/components/ui/` for primitives, `src/tabs/` for tab views
- **Conventions**: PascalCase components, kebab-case files, path aliases `@/`

---

## Phase 1: Rust Backend - Install Aptabase Plugin

- [x] **Add tauri-plugin-aptabase to Cargo.toml** (ref: PRD Technical Requirements)
- [x] **Create .env file with Aptabase API key** (ref: PRD Technical Requirements)
- [x] **Register Aptabase plugin in lib.rs** (ref: PRD Technical Requirements)
- [x] **Add Aptabase capability to tauri.conf.json** (ref: PRD Technical Requirements)

---

## Phase 2: Frontend - Install Aptabase Package

- [x] **Install @aptabase/tauri npm package** (ref: PRD Technical Requirements)
  - Note: Later removed npm package and used direct `invoke()` call due to Tauri 2 compatibility issues
- [x] **Create analytics utility module** (ref: PRD Must-Have #4)

---

## Phase 3: First-Run Consent Dialog

- [x] **Create ConsentDialog component** (ref: PRD Must-Have #1)
- [x] **Add consent check to App.tsx** (ref: PRD Must-Have #1)

---

## Phase 4: Settings Toggle

- [x] **Add analytics toggle to ConfigsTab** (ref: PRD Must-Have #2)

---

## Phase 5: Event Tracking Integration

- [x] **Track tab navigation events** (ref: PRD Must-Have #4)
- [x] **Track stadium pack installation** (ref: PRD Must-Have #4)
- [x] **Track custom stadiums installation** (ref: PRD Must-Have #4)
- [x] **Track config saves** (ref: PRD Must-Have #4)
- [x] **Track team mapping saves** (ref: PRD Must-Have #4)

---

## Phase 6: Error Tracking

- [x] **Add global error boundary with tracking** (ref: PRD Must-Have #5)
- [x] **Wrap App with ErrorBoundary** (ref: PRD Must-Have #5)
- [x] **Add window error listener for uncaught errors** (ref: PRD Must-Have #5)

---

## Phase 7: Testing & Verification

- [x] **Verify Aptabase integration works** (ref: PRD Technical Requirements)
- [x] **Add .env.example for documentation** (ref: PRD Technical Requirements)

---

## Additional Enhancements (Beyond Original Plan)

- [x] **Added tokio runtime** for Aptabase plugin compatibility
- [x] **Added tauri-plugin-opener** for opening folders (replaced shell:open)
- [x] **Enhanced tracking events**:
  - `fm26_autodetect` (paths_found)
  - `fm26_loaded` (plugins_installed, plugins_total)
  - `stadiums_loaded` (bundles, mappings)
  - `bundles_refreshed` (count)
  - `mapping_added`
  - `mapping_removed`

---

*Generated by Clavix /clavix:plan*
*Completed: 2025-12-11*
